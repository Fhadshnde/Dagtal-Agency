{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Dagtal-Agenced/my-app/src/app/dashborad/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useSession } from \"next-auth/react\";\r\nimport useSWR, { mutate } from \"swr\";\r\nimport styles from \"./dashboard.module.css\";\r\nimport Image from \"next/image\";\r\n\r\nconst fetcher = (url) => fetch(url).then((res) => res.json());\r\n\r\nconst Dashboard = () => {\r\n  const { data: session, status } = useSession();\r\n  const { data, error, isLoading } = useSWR(\"/api/posts\", fetcher);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await fetch(`/api/posts/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n      mutate(\"/api/posts\");\r\n    } catch (err) {\r\n      console.error(\"Error deleting post:\", err);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n\r\n    const newPost = {\r\n      title: formData.get(\"title\"),\r\n      desc: formData.get(\"desc\"),\r\n      img: formData.get(\"image\"),\r\n      content: formData.get(\"content\"),\r\n    };\r\n\r\n    try {\r\n      await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(newPost),\r\n      });\r\n      mutate(\"/api/posts\");\r\n    } catch (err) {\r\n      console.error(\"Error adding post:\", err);\r\n    }\r\n  };\r\n\r\n  if (status === \"loading\") {\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  if (status === \"unauthenticated\") {\r\n    return <p>Access Denied</p>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.posts}>\r\n        {isLoading ? (\r\n          \"loading\"\r\n        ) : (\r\n          data?.map((post) => (\r\n            <div className={styles.post} key={post._id}>\r\n              <div className={styles.imgContainer}>\r\n                <Image src={post.img} alt=\"\" width={200} height={100} />\r\n              </div>\r\n              <h2 className={styles.postTitle}>{post.title}</h2>\r\n              <span\r\n                className={styles.delete}\r\n                onClick={() => handleDelete(post._id)}\r\n              >\r\n                X\r\n              </span>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      <form className={styles.new} onSubmit={handleSubmit}>\r\n        <h1>Add New Post</h1>\r\n        <input\r\n          name=\"title\"\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          className={styles.input}\r\n        />\r\n        <input\r\n          name=\"desc\"\r\n          type=\"text\"\r\n          placeholder=\"Desc\"\r\n          className={styles.input}\r\n        />\r\n        <input\r\n          name=\"image\"\r\n          type=\"text\"\r\n          placeholder=\"Image\"\r\n          className={styles.input}\r\n        />\r\n        <textarea\r\n          name=\"content\"\r\n          placeholder=\"Content\"\r\n          className={styles.textArea}\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n        ></textarea>\r\n        <button className={styles.button}>Send</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;AAEA;AAFA;AAAA;;;AAHA;;;;;AAOA,MAAM,UAAU,CAAC,MAAQ,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AAE1D,MAAM,YAAY;;IAChB,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iJAAA,CAAA,aAAU,AAAD;IAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,gKAAA,CAAA,UAAM,AAAD,EAAE,cAAc;IAExD,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE;gBAC9B,QAAQ;YACV;YACA,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,WAAW,IAAI,SAAS,EAAE,MAAM;QAEtC,MAAM,UAAU;YACd,OAAO,SAAS,GAAG,CAAC;YACpB,MAAM,SAAS,GAAG,CAAC;YACnB,KAAK,SAAS,GAAG,CAAC;YAClB,SAAS,SAAS,GAAG,CAAC;QACxB;QAEA,IAAI;YACF,MAAM,MAAM,cAAc;gBACxB,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,sBAAsB;QACtC;IACF;IAEA,IAAI,WAAW,WAAW;QACxB,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,IAAI,WAAW,mBAAmB;QAChC,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,6LAAC;QAAI,WAAW,OAAO,SAAS;;0BAC9B,6LAAC;gBAAI,WAAW,OAAO,KAAK;0BACzB,YACC,YAEA,MAAM,IAAI,CAAC,qBACT,6LAAC;wBAAI,WAAW,OAAO,IAAI;;0CACzB,6LAAC;gCAAI,WAAW,OAAO,YAAY;0CACjC,cAAA,6LAAC,gIAAA,CAAA,UAAK;oCAAC,KAAK,KAAK,GAAG;oCAAE,KAAI;oCAAG,OAAO;oCAAK,QAAQ;;;;;;;;;;;0CAEnD,6LAAC;gCAAG,WAAW,OAAO,SAAS;0CAAG,KAAK,KAAK;;;;;;0CAC5C,6LAAC;gCACC,WAAW,OAAO,MAAM;gCACxB,SAAS,IAAM,aAAa,KAAK,GAAG;0CACrC;;;;;;;uBAR+B,KAAK,GAAG;;;;;;;;;;0BAehD,6LAAC;gBAAK,WAAW,OAAO,GAAG;gBAAE,UAAU;;kCACrC,6LAAC;kCAAG;;;;;;kCACJ,6LAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAW,OAAO,KAAK;;;;;;kCAEzB,6LAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAW,OAAO,KAAK;;;;;;kCAEzB,6LAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAW,OAAO,KAAK;;;;;;kCAEzB,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAW,OAAO,QAAQ;wBAC1B,MAAK;wBACL,MAAK;;;;;;kCAEP,6LAAC;wBAAO,WAAW,OAAO,MAAM;kCAAE;;;;;;;;;;;;;;;;;;AAI1C;GArGM;;QAC8B,iJAAA,CAAA,aAAU;QACT,gKAAA,CAAA,UAAM;;;KAFrC;uCAuGS"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}